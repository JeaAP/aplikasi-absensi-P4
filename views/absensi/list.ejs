<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Absensi</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        /* Sunset gradient background */
        body {
            background: linear-gradient(45deg, #f39c12, #e74c3c, #8e44ad);
            background-size: 400% 400%;
            animation: gradientAnimation 8s ease infinite;
            height: 100vh;
            position: relative;
        }

        @keyframes gradientAnimation {
            0% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }

            100% {
                background-position: 0% 50%;
            }
        }

        /* Matahari terbenam (sunset) */
        .sun {
            position: absolute;
            bottom: -50px;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 200px;
            background-color: #f39c12;
            border-radius: 50%;
            box-shadow: 0 0 30px rgba(255, 140, 0, 0.8);
            animation: sunset 8s ease-in-out infinite;
        }

        @keyframes sunset {
            0% {
                bottom: -50px;
                opacity: 1;
            }

            50% {
                bottom: 100px;
                opacity: 0.8;
            }

            100% {
                bottom: 200px;
                opacity: 0.5;
            }
        }
    </style>
</head>

<body class="flex items-center justify-center p-4 relative">

    <!-- Matahari Terbenam -->
    <div class="sun"></div>

    <!-- Container -->
    <div class="max-w-6xl w-full bg-transparent rounded-lg shadow-lg p-8 space-y-6 animate__animated animate__fadeIn animate__delay-1s z-10">

        <h1 class="text-4xl font-extrabold text-center text-gray-800 mb-6">Data Absensi</h1>

        <!-- Tambah Absensi Button -->
        <div class="text-center">
            <a href="/absensi/tambah" class="inline-flex items-center px-8 py-4 bg-gradient-to-r from-pink-500 to-yellow-500 text-white rounded-full text-xl font-semibold hover:shadow-lg transform transition-all duration-300 hover:scale-105">
                <span class="material-icons mr-2">add_circle_outline</span>Tambah Absensi
            </a>
        </div>

        <!-- Daftar Absensi -->
        <ul class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
            <% absensi.forEach(function(absensiItem) { %>
                <li class="bg-white card p-6 rounded-xl shadow-md transition-all transform hover:bg-white hover:scale-105 hover:shadow-xl">
                    <div class="space-y-4">
                        <!-- Nama Tamu -->
                        <div>
                            <strong class="text-lg text-gray-800">Nama Tamu:</strong>
                            <p class="text-gray-600"><%= absensiItem.nama_tamu %></p>
                        </div>

                        <!-- Room -->
                        <div>
                            <strong class="text-lg text-gray-800">Room:</strong>
                            <% 
                                const room = rooms.find(room => room.room_id === absensiItem.room_id);
                                if (room) {
                                    %><p class="text-gray-600"><%= room.nama %> - <%= room.lokasi %></p><% 
                                } else { 
                                    %><p class="text-red-600">Room not found</p><% 
                                }
                            %>
                        </div>

                        <!-- Waktu Masuk -->
                        <div>
                            <strong class="text-lg text-gray-800">Waktu Masuk:</strong>
                            <p class="text-gray-600"><%= absensiItem.waktu_masuk %></p>
                        </div>

                        <!-- Waktu Keluar -->
                        <div>
                            <strong class="text-lg text-gray-800">Waktu Keluar:</strong>
                            <p class="text-gray-600"><%= absensiItem.waktu_keluar || 'N/A' %></p>
                        </div>

                        <!-- Keperluan -->
                        <div>
                            <strong class="text-lg text-gray-800">Keperluan:</strong>
                            <p class="text-gray-600"><%= absensiItem.keperluan %></p>
                        </div>
                    </div>

                    <!-- Actions -->
                    <div class="flex justify-between mt-6 text-sm">
                        <a href="/absensi/<%= absensiItem.absensi_id %>/edit" class="text-blue-600 hover:text-blue-800 transition-colors">
                            <span class="material-icons">edit</span> Edit
                        </a>
                        <a href="/absensi/<%= absensiItem.absensi_id %>/delete" class="text-red-600 hover:text-red-800 transition-colors" onclick="return confirmDelete()">
                            <span class="material-icons">delete</span> Delete
                        </a>
                    </div>
                </li>
            <% }) %>
        </ul>

    </div>

    <!-- Konfirmasi Delete -->
    <script>
        function confirmDelete() {
            return confirm('Are you sure you want to delete this absensi?');
        }
    </script>
</body>

</html>
